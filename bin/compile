#!/bin/bash

arrow() {
  echo '----->' "$@"
}

indent() {
  sed -u 's/^/       /'
}

BUILD_DIR=$1
#CACHE_DIR=$2
#ENV_DIR=$3

arrow "Installing unixODBC"
apt-get update | indent
apt-get install --yes unixodbc-dev | indent

arrow "Installing Snowflake ODBC driver"
dpkg --install snowflake-odbc.deb | indent
apt-get install --fix-broken --yes | indent

arrow "Installing simba.snowflake.ini"
cp "simba.snowflake.ini" "/usr/lib/snowflake/odbc/lib/simba.snowflake.ini" | indent

arrow "Adding profile.d script"
mkdir -p "${BUILD_DIR}/.profile.d" | indent
cp ".profile.d/configure-snowflake-odbc.sh" "${BUILD_DIR}/profile.d" | indent
